import{$a as ht,Aa as p,Bb as B,Cb as X,Ga as P,Ha as mt,Ia as j,Ib as on,Ja as Jt,K as Fe,Ka as Q,Kb as vt,L as ve,M as ie,Ma as I,N as at,P as Z,Qa as Qt,R as A,Sb as ce,Ta as ft,U as Xt,Ua as Te,Va as v,W as w,X as V,Y as re,Ya as g,Z as Zt,Za as _,_a as pt,a as f,ab as F,b as O,ba as lt,bb as h,cb as y,db as z,eb as L,fa as ct,fb as R,ga as T,gb as se,h as Yt,hb as H,ib as Pe,ja as Ne,jb as M,k as qt,ka as ut,kb as Re,lb as m,ma as Ce,mb as gt,nb as C,ob as ae,p as zt,pb as _t,qb as le,rb as G,sb as S,tb as oe,ua as Oe,ub as en,v as Kt,vb as yt,wa as u,wb as tn,xb as nn,yb as rn,za as dt}from"./chunk-PHKRTPZC.js";var vi=Math.pow(10,8)*24*60*60*1e3,Fo=-vi;var Ct=6e4,bt=36e5;var be=43200,Dt=1440;var Ci=3600;var sn=Ci*24,No=sn*7,bi=sn*365.2425,Di=bi/12,Oo=Di*3,xt=Symbol.for("constructDateFrom");function ee(n,e){return typeof n=="function"?n(e):n&&typeof n=="object"&&xt in n?n[xt](e):n instanceof Date?new n.constructor(e):new Date(e)}function b(n,e){return ee(e||n,n)}var xi={};function an(){return xi}function wt(n){let e=b(n),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+n-+t}function ue(n,...e){let t=ee.bind(null,n||e.find(i=>typeof i=="object"));return e.map(t)}function de(n,e){let t=+b(n)-+b(e);return t<0?-1:t>0?1:t}function ln(n){return ee(n,Date.now())}function cn(n){return n instanceof Date||typeof n=="object"&&Object.prototype.toString.call(n)==="[object Date]"}function un(n){return!(!cn(n)&&typeof n!="number"||isNaN(+b(n)))}function dn(n,e,t){let[i,r]=ue(t?.in,n,e),o=i.getFullYear()-r.getFullYear(),a=i.getMonth()-r.getMonth();return o*12+a}function mn(n){return e=>{let i=(n?Math[n]:Math.trunc)(e);return i===0?0:i}}function fn(n,e){return+b(n)-+b(e)}function pn(n,e){let t=b(n,e?.in);return t.setHours(23,59,59,999),t}function hn(n,e){let t=b(n,e?.in),i=t.getMonth();return t.setFullYear(t.getFullYear(),i+1,0),t.setHours(23,59,59,999),t}function gn(n,e){let t=b(n,e?.in);return+pn(t,e)==+hn(t,e)}function _n(n,e,t){let[i,r,o]=ue(t?.in,n,n,e),a=de(r,o),s=Math.abs(dn(r,o));if(s<1)return 0;r.getMonth()===1&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-a*s);let c=de(r,o)===-a;gn(i)&&s===1&&de(i,o)===1&&(c=!1);let l=a*(s-+c);return l===0?0:l}function yn(n,e,t){let i=fn(n,e)/1e3;return mn(t?.roundingMethod)(i)}var wi={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},vn=(n,e,t)=>{let i,r=wi[n];return typeof r=="string"?i=r:e===1?i=r.one:i=r.other.replace("{{count}}",e.toString()),t?.addSuffix?t.comparison&&t.comparison>0?"in "+i:i+" ago":i};function ke(n){return(e={})=>{let t=e.width?String(e.width):n.defaultWidth;return n.formats[t]||n.formats[n.defaultWidth]}}var Vi={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Mi={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Si={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Cn={date:ke({formats:Vi,defaultWidth:"full"}),time:ke({formats:Mi,defaultWidth:"full"}),dateTime:ke({formats:Si,defaultWidth:"full"})};var Ei={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},bn=(n,e,t,i)=>Ei[n];function me(n){return(e,t)=>{let i=t?.context?String(t.context):"standalone",r;if(i==="formatting"&&n.formattingValues){let a=n.defaultFormattingWidth||n.defaultWidth,s=t?.width?String(t.width):a;r=n.formattingValues[s]||n.formattingValues[a]}else{let a=n.defaultWidth,s=t?.width?String(t.width):n.defaultWidth;r=n.values[s]||n.values[a]}let o=n.argumentCallback?n.argumentCallback(e):e;return r[o]}}var Ai={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Ii={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Fi={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Ni={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Oi={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Ti={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Pi=(n,e)=>{let t=Number(n),i=t%100;if(i>20||i<10)switch(i%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},Dn={ordinalNumber:Pi,era:me({values:Ai,defaultWidth:"wide"}),quarter:me({values:Ii,defaultWidth:"wide",argumentCallback:n=>n-1}),month:me({values:Fi,defaultWidth:"wide"}),day:me({values:Ni,defaultWidth:"wide"}),dayPeriod:me({values:Oi,defaultWidth:"wide",formattingValues:Ti,defaultFormattingWidth:"wide"})};function fe(n){return(e,t={})=>{let i=t.width,r=i&&n.matchPatterns[i]||n.matchPatterns[n.defaultMatchWidth],o=e.match(r);if(!o)return null;let a=o[0],s=i&&n.parsePatterns[i]||n.parsePatterns[n.defaultParseWidth],c=Array.isArray(s)?ki(s,N=>N.test(a)):Ri(s,N=>N.test(a)),l;l=n.valueCallback?n.valueCallback(c):c,l=t.valueCallback?t.valueCallback(l):l;let D=e.slice(a.length);return{value:l,rest:D}}}function Ri(n,e){for(let t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&e(n[t]))return t}function ki(n,e){for(let t=0;t<n.length;t++)if(e(n[t]))return t}function xn(n){return(e,t={})=>{let i=e.match(n.matchPattern);if(!i)return null;let r=i[0],o=e.match(n.parsePattern);if(!o)return null;let a=n.valueCallback?n.valueCallback(o[0]):o[0];a=t.valueCallback?t.valueCallback(a):a;let s=e.slice(r.length);return{value:a,rest:s}}}var Ui=/^(\d+)(th|st|nd|rd)?/i,ji=/\d+/i,Li={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Gi={any:[/^b/i,/^(a|c)/i]},Wi={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Hi={any:[/1/i,/2/i,/3/i,/4/i]},Bi={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},$i={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Yi={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},qi={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},zi={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Ki={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},wn={ordinalNumber:xn({matchPattern:Ui,parsePattern:ji,valueCallback:n=>parseInt(n,10)}),era:fe({matchPatterns:Li,defaultMatchWidth:"wide",parsePatterns:Gi,defaultParseWidth:"any"}),quarter:fe({matchPatterns:Wi,defaultMatchWidth:"wide",parsePatterns:Hi,defaultParseWidth:"any",valueCallback:n=>n+1}),month:fe({matchPatterns:Bi,defaultMatchWidth:"wide",parsePatterns:$i,defaultParseWidth:"any"}),day:fe({matchPatterns:Yi,defaultMatchWidth:"wide",parsePatterns:qi,defaultParseWidth:"any"}),dayPeriod:fe({matchPatterns:zi,defaultMatchWidth:"any",parsePatterns:Ki,defaultParseWidth:"any"})};var Vt={code:"en-US",formatDistance:vn,formatLong:Cn,formatRelative:bn,localize:Dn,match:wn,options:{weekStartsOn:0,firstWeekContainsDate:1}};function J(n,e){let t=n<0?"-":"",i=Math.abs(n).toString().padStart(e,"0");return t+i}function Vn(n,e,t){let i=an(),r=t?.locale??i.locale??Vt,o=2520,a=de(n,e);if(isNaN(a))throw new RangeError("Invalid time value");let s=Object.assign({},t,{addSuffix:t?.addSuffix,comparison:a}),[c,l]=ue(t?.in,...a>0?[e,n]:[n,e]),D=yn(l,c),N=(wt(l)-wt(c))/1e3,x=Math.round((D-N)/60),Y;if(x<2)return t?.includeSeconds?D<5?r.formatDistance("lessThanXSeconds",5,s):D<10?r.formatDistance("lessThanXSeconds",10,s):D<20?r.formatDistance("lessThanXSeconds",20,s):D<40?r.formatDistance("halfAMinute",0,s):D<60?r.formatDistance("lessThanXMinutes",1,s):r.formatDistance("xMinutes",1,s):x===0?r.formatDistance("lessThanXMinutes",1,s):r.formatDistance("xMinutes",x,s);if(x<45)return r.formatDistance("xMinutes",x,s);if(x<90)return r.formatDistance("aboutXHours",1,s);if(x<Dt){let U=Math.round(x/60);return r.formatDistance("aboutXHours",U,s)}else{if(x<o)return r.formatDistance("xDays",1,s);if(x<be){let U=Math.round(x/Dt);return r.formatDistance("xDays",U,s)}else if(x<be*2)return Y=Math.round(x/be),r.formatDistance("aboutXMonths",Y,s)}if(Y=_n(l,c),Y<12){let U=Math.round(x/be);return r.formatDistance("xMonths",U,s)}else{let U=Y%12,q=Math.trunc(Y/12);return U<3?r.formatDistance("aboutXYears",q,s):U<9?r.formatDistance("overXYears",q,s):r.formatDistance("almostXYears",q+1,s)}}function Mn(n,e){return Vn(n,ln(n),e)}function Mt(n,e){let t=b(n,e?.in);if(isNaN(+t))throw new RangeError("Invalid time value");let i=e?.format??"extended",r=e?.representation??"complete",o="",a="",s=i==="extended"?"-":"",c=i==="extended"?":":"";if(r!=="time"){let l=J(t.getDate(),2),D=J(t.getMonth()+1,2);o=`${J(t.getFullYear(),4)}${s}${D}${s}${l}`}if(r!=="date"){let l=t.getTimezoneOffset();if(l!==0){let q=Math.abs(l),st=J(Math.trunc(q/60),2),yi=J(q%60,2);a=`${l<0?"+":"-"}${st}:${yi}`}else a="Z";let D=J(t.getHours(),2),N=J(t.getMinutes(),2),x=J(t.getSeconds(),2),Y=o===""?"":"T",U=[D,N,x].join(c);o=`${o}${Y}${U}${a}`}return o}function Sn(n,e){let t=()=>ee(e?.in,NaN),i=e?.additionalDigits??2,r=Qi(n),o;if(r.date){let l=er(r.date,i);o=tr(l.restDateString,l.year)}if(!o||isNaN(+o))return t();let a=+o,s=0,c;if(r.time&&(s=nr(r.time),isNaN(s)))return t();if(r.timezone){if(c=ir(r.timezone),isNaN(c))return t()}else{let l=new Date(a+s),D=b(0,e?.in);return D.setFullYear(l.getUTCFullYear(),l.getUTCMonth(),l.getUTCDate()),D.setHours(l.getUTCHours(),l.getUTCMinutes(),l.getUTCSeconds(),l.getUTCMilliseconds()),D}return b(a+s+c,e?.in)}var Ue={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},Xi=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,Zi=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,Ji=/^([+-])(\d{2})(?::?(\d{2}))?$/;function Qi(n){let e={},t=n.split(Ue.dateTimeDelimiter),i;if(t.length>2)return e;if(/:/.test(t[0])?i=t[0]:(e.date=t[0],i=t[1],Ue.timeZoneDelimiter.test(e.date)&&(e.date=n.split(Ue.timeZoneDelimiter)[0],i=n.substr(e.date.length,n.length))),i){let r=Ue.timezone.exec(i);r?(e.time=i.replace(r[1],""),e.timezone=r[1]):e.time=i}return e}function er(n,e){let t=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),i=n.match(t);if(!i)return{year:NaN,restDateString:""};let r=i[1]?parseInt(i[1]):null,o=i[2]?parseInt(i[2]):null;return{year:o===null?r:o*100,restDateString:n.slice((i[1]||i[2]).length)}}function tr(n,e){if(e===null)return new Date(NaN);let t=n.match(Xi);if(!t)return new Date(NaN);let i=!!t[4],r=De(t[1]),o=De(t[2])-1,a=De(t[3]),s=De(t[4]),c=De(t[5])-1;if(i)return lr(e,s,c)?rr(e,s,c):new Date(NaN);{let l=new Date(0);return!sr(e,o,a)||!ar(e,r)?new Date(NaN):(l.setUTCFullYear(e,o,Math.max(r,a)),l)}}function De(n){return n?parseInt(n):1}function nr(n){let e=n.match(Zi);if(!e)return NaN;let t=St(e[1]),i=St(e[2]),r=St(e[3]);return cr(t,i,r)?t*bt+i*Ct+r*1e3:NaN}function St(n){return n&&parseFloat(n.replace(",","."))||0}function ir(n){if(n==="Z")return 0;let e=n.match(Ji);if(!e)return 0;let t=e[1]==="+"?-1:1,i=parseInt(e[2]),r=e[3]&&parseInt(e[3])||0;return ur(i,r)?t*(i*bt+r*Ct):NaN}function rr(n,e,t){let i=new Date(0);i.setUTCFullYear(n,0,4);let r=i.getUTCDay()||7,o=(e-1)*7+t+1-r;return i.setUTCDate(i.getUTCDate()+o),i}var or=[31,null,31,30,31,30,31,31,30,31,30,31];function En(n){return n%400===0||n%4===0&&n%100!==0}function sr(n,e,t){return e>=0&&e<=11&&t>=1&&t<=(or[e]||(En(n)?29:28))}function ar(n,e){return e>=1&&e<=(En(n)?366:365)}function lr(n,e,t){return e>=1&&e<=53&&t>=0&&t<=6}function cr(n,e,t){return n===24?e===0&&t===0:t>=0&&t<60&&e>=0&&e<60&&n>=0&&n<25}function ur(n,e){return e>=0&&e<=59}var je=class n{transform(e){if(!e)return"";let t=typeof e=="string"?Sn(e):e;return un(t)?Mn(t,{addSuffix:!0}):""}static \u0275fac=function(t){return new(t||n)};static \u0275pipe=Jt({name:"timeAgo",type:n,pure:!0})};var E=[];for(let n=0;n<256;++n)E.push((n+256).toString(16).slice(1));function An(n,e=0){return(E[n[e+0]]+E[n[e+1]]+E[n[e+2]]+E[n[e+3]]+"-"+E[n[e+4]]+E[n[e+5]]+"-"+E[n[e+6]]+E[n[e+7]]+"-"+E[n[e+8]]+E[n[e+9]]+"-"+E[n[e+10]]+E[n[e+11]]+E[n[e+12]]+E[n[e+13]]+E[n[e+14]]+E[n[e+15]]).toLowerCase()}var Et,dr=new Uint8Array(16);function At(){if(!Et){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Et=crypto.getRandomValues.bind(crypto)}return Et(dr)}var mr=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),It={randomUUID:mr};function fr(n,e,t){if(It.randomUUID&&!e&&!n)return It.randomUUID();n=n||{};let i=n.random??n.rng?.()??At();if(i.length<16)throw new Error("Random bytes length must be >= 16");if(i[6]=i[6]&15|64,i[8]=i[8]&63|128,e){if(t=t||0,t<0||t+16>e.length)throw new RangeError(`UUID byte range ${t}:${t+15} is out of buffer bounds`);for(let r=0;r<16;++r)e[t+r]=i[r];return e}return An(i)}var Ft=fr;var d={INITIAL:"INITIAL",INFORMATION:"INFORMATION",UPDATE:"UPDATE",REPLY:"REPLY",DELETE:"DELETE",SEND:"SEND",UPVOTE:"UPVOTE"};var k=class n{uniqueId;status;comment;currentUser;replyingTo;isYourOwnComment;constructor(){this.uniqueId=T(Ft()),this.status=T(d.INITIAL),this.comment=T(void 0),this.currentUser=T(void 0),this.replyingTo=T(""),this.isYourOwnComment=T(!1)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=ie({token:n,factory:n.\u0275fac})};function pr(n,e){n&1&&(L(0,"em",4),C(1,"You"),R())}function hr(n,e){if(n&1&&(L(0,"time",5),C(1),nn(2,"timeAgo"),R()),n&2){m(2);let t=S(0);v("datetime",t.createdAt),u(),ae(rn(2,2,t.createdAt))}}function gr(n,e){if(n&1&&(L(0,"header",0)(1,"h2",1),C(2),R(),se(3,"img",2),L(4,"span",3),C(5),g(6,pr,2,0,"em",4),R(),g(7,hr,3,4,"time",5),R()),n&2){let t=m(),i=S(0),r=S(1),o=S(2);u(),v("id","comment-heading"+t.state.uniqueId()),u(),_t(" Comment by ",i.user.username," "),u(),Pe("src",i.user.image.png,Oe),v("alt","Avatar of "+i.user.username),u(2),_t("",r," "),u(),_(o?6:-1),u(),_(i.createdAt?7:-1)}}var Le=class n{constructor(e){this.state=e}static \u0275fac=function(t){return new(t||n)(p(k))};static \u0275cmp=P({type:n,selectors:[["app-comment-header"]],decls:4,vars:4,consts:[[1,"comment-card-header","flex","items-center","justify-start","gap-[10px]"],[1,"sr-only"],["width","32px","height","32px",1,"avatar",3,"src"],[1,"username","text-preset-2-medium","txt-grey-800","flex-center","gap-[8px]"],[1,"txt-white","text-preset-3","flex-center","p-","bg-starstruck","rounded-[2px]","px-[8px]","py-[4px]","not-italic"],[1,"created-at","txt-grey-500","text-preset-2"]],template:function(t,i){if(t&1&&(le(0)(1)(2),g(3,gr,8,7,"header",0)),t&2){let r,o=G(i.state.comment());u();let a=G(o==null||o.user==null?null:o.user.username),s=(r=i.state.currentUser())==null?null:r.username;u(),G(a===s),u(),_(o?3:-1)}},dependencies:[je],encapsulation:2,changeDetection:0})};var kn=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,i){this._renderer=t,this._elementRef=i}setProperty(t,i){this._renderer.setProperty(this._elementRef.nativeElement,t,i)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(i){return new(i||n)(p(dt),p(Ce))};static \u0275dir=j({type:n})}return n})(),yr=(()=>{class n extends kn{static \u0275fac=(()=>{let t;return function(r){return(t||(t=ut(n)))(r||n)}})();static \u0275dir=j({type:n,features:[Q]})}return n})(),Un=new Z("");var vr={provide:Un,useExisting:ve(()=>Ze),multi:!0};function Cr(){let n=vt()?vt().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var br=new Z(""),Ze=(()=>{class n extends kn{_compositionMode;_composing=!1;constructor(t,i,r){super(t,i),this._compositionMode=r,this._compositionMode==null&&(this._compositionMode=!Cr())}writeValue(t){let i=t??"";this.setProperty("value",i)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(i){return new(i||n)(p(dt),p(Ce),p(br,8))};static \u0275dir=j({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,r){i&1&&M("input",function(a){return r._handleInput(a.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(a){return r._compositionEnd(a.target.value)})},standalone:!1,features:[oe([vr]),Q]})}return n})();function Pt(n){return n==null||Rt(n)===0}function Rt(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var kt=new Z(""),jn=new Z(""),Dr=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Ee=class{static min(e){return xr(e)}static max(e){return wr(e)}static required(e){return Vr(e)}static requiredTrue(e){return Mr(e)}static email(e){return Sr(e)}static minLength(e){return Er(e)}static maxLength(e){return Ln(e)}static pattern(e){return Ar(e)}static nullValidator(e){return We()}static compose(e){return Yn(e)}static composeAsync(e){return zn(e)}};function xr(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function wr(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}function Vr(n){return Pt(n.value)?{required:!0}:null}function Mr(n){return n.value===!0?null:{required:!0}}function Sr(n){return Pt(n.value)||Dr.test(n.value)?null:{email:!0}}function Er(n){return e=>{let t=e.value?.length??Rt(e.value);return t===null||t===0?null:t<n?{minlength:{requiredLength:n,actualLength:t}}:null}}function Ln(n){return e=>{let t=e.value?.length??Rt(e.value);return t!==null&&t>n?{maxlength:{requiredLength:n,actualLength:t}}:null}}function Ar(n){if(!n)return We;let e,t;return typeof n=="string"?(t="",n.charAt(0)!=="^"&&(t+="^"),t+=n,n.charAt(n.length-1)!=="$"&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),i=>{if(Pt(i.value))return null;let r=i.value;return e.test(r)?null:{pattern:{requiredPattern:t,actualValue:r}}}}function We(n){return null}function Gn(n){return n!=null}function Wn(n){return Qt(n)?qt(n):n}function Hn(n){let e={};return n.forEach(t=>{e=t!=null?f(f({},e),t):e}),Object.keys(e).length===0?null:e}function Bn(n,e){return e.map(t=>t(n))}function Ir(n){return!n.validate}function $n(n){return n.map(e=>Ir(e)?e:t=>e.validate(t))}function Yn(n){if(!n)return null;let e=n.filter(Gn);return e.length==0?null:function(t){return Hn(Bn(t,e))}}function qn(n){return n!=null?Yn($n(n)):null}function zn(n){if(!n)return null;let e=n.filter(Gn);return e.length==0?null:function(t){let i=Bn(t,e).map(Wn);return Kt(i).pipe(zt(Hn))}}function Kn(n){return n!=null?zn($n(n)):null}function In(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Xn(n){return n._rawValidators}function Zn(n){return n._rawAsyncValidators}function Nt(n){return n?Array.isArray(n)?n:[n]:[]}function He(n,e){return Array.isArray(n)?n.includes(e):n===e}function Fn(n,e){let t=Nt(e);return Nt(n).forEach(r=>{He(t,r)||t.push(r)}),t}function Nn(n,e){return Nt(e).filter(t=>!He(n,t))}var Be=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=qn(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Kn(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},_e=class extends Be{name;get formDirective(){return null}get path(){return null}},Ae=class extends Be{_parent=null;name=null;valueAccessor=null},$e=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},Fr={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},Ya=O(f({},Fr),{"[class.ng-submitted]":"isSubmitted"}),Jn=(()=>{class n extends $e{constructor(t){super(t)}static \u0275fac=function(i){return new(i||n)(p(Ae,2))};static \u0275dir=j({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,r){i&2&&gt("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},standalone:!1,features:[Q]})}return n})(),Qn=(()=>{class n extends $e{constructor(t){super(t)}static \u0275fac=function(i){return new(i||n)(p(_e,10))};static \u0275dir=j({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,r){i&2&&gt("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},standalone:!1,features:[Q]})}return n})();var we="VALID",Ge="INVALID",he="PENDING",Ve="DISABLED",te=class{},Ye=class extends te{value;source;constructor(e,t){super(),this.value=e,this.source=t}},Me=class extends te{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},Se=class extends te{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},ge=class extends te{status;source;constructor(e,t){super(),this.status=e,this.source=t}},Ot=class extends te{source;constructor(e){super(),this.source=e}},Tt=class extends te{source;constructor(e){super(),this.source=e}};function ei(n){return(Je(n)?n.validators:n)||null}function Nr(n){return Array.isArray(n)?qn(n):n||null}function ti(n,e){return(Je(e)?e.asyncValidators:n)||null}function Or(n){return Array.isArray(n)?Kn(n):n||null}function Je(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function Tr(n,e,t){let i=n.controls;if(!(e?Object.keys(i):i).length)throw new Fe(1e3,"");if(!i[t])throw new Fe(1001,"")}function Pr(n,e,t){n._forEachChild((i,r)=>{if(t[r]===void 0)throw new Fe(1002,"")})}var qe=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return B(this.statusReactive)}set status(e){B(()=>this.statusReactive.set(e))}_status=X(()=>this.statusReactive());statusReactive=T(void 0);get valid(){return this.status===we}get invalid(){return this.status===Ge}get pending(){return this.status==he}get disabled(){return this.status===Ve}get enabled(){return this.status!==Ve}errors;get pristine(){return B(this.pristineReactive)}set pristine(e){B(()=>this.pristineReactive.set(e))}_pristine=X(()=>this.pristineReactive());pristineReactive=T(!0);get dirty(){return!this.pristine}get touched(){return B(this.touchedReactive)}set touched(e){B(()=>this.touchedReactive.set(e))}_touched=X(()=>this.touchedReactive());touchedReactive=T(!1);get untouched(){return!this.touched}_events=new Yt;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(Fn(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Fn(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Nn(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Nn(e,this._rawAsyncValidators))}hasValidator(e){return He(this._rawValidators,e)}hasAsyncValidator(e){return He(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(O(f({},e),{sourceControl:i})),t&&e.emitEvent!==!1&&this._events.next(new Se(!0,i))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let i=e.sourceControl??this;this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:i})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,i),t&&e.emitEvent!==!1&&this._events.next(new Se(!1,i))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(O(f({},e),{sourceControl:i})),t&&e.emitEvent!==!1&&this._events.next(new Me(!1,i))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let i=e.sourceControl??this;this._forEachChild(r=>{r.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,i),t&&e.emitEvent!==!1&&this._events.next(new Me(!0,i))}markAsPending(e={}){this.status=he;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new ge(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(O(f({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Ve,this.errors=null,this._forEachChild(r=>{r.disable(O(f({},e),{onlySelf:!0}))}),this._updateValue();let i=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Ye(this.value,i)),this._events.next(new ge(this.status,i)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(O(f({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=we,this._forEachChild(i=>{i.enable(O(f({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(O(f({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let i=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===we||this.status===he)&&this._runAsyncValidator(i,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Ye(this.value,t)),this._events.next(new ge(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(O(f({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Ve:we}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=he,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1,shouldHaveEmitted:e!==!1};let i=Wn(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(r=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(r,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((i,r)=>i&&i._find(r),this)}getError(e,t){let i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,i){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||i)&&this._events.next(new ge(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,i)}_initObservables(){this.valueChanges=new I,this.statusChanges=new I}_calculateStatus(){return this._allControlsDisabled()?Ve:this.errors?Ge:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(he)?he:this._anyControlsHaveStatus(Ge)?Ge:we}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let i=!this._anyControlsDirty(),r=this.pristine!==i;this.pristine=i,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),r&&this._events.next(new Me(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new Se(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Je(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=Nr(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=Or(this._rawAsyncValidators)}},ze=class extends qe{constructor(e,t,i){super(ei(t),ti(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,i={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){Pr(this,!0,e),Object.keys(e).forEach(i=>{Tr(this,!0,i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(i=>{let r=this.controls[i];r&&r.patchValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((i,r)=>{i.reset(e?e[r]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,i)=>(e[i]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,i)=>i._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let i=this.controls[t];i&&e(i,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,i]of Object.entries(this.controls))if(this.contains(t)&&e(i))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,i,r)=>((i.enabled||this.disabled)&&(t[r]=i.value),t))}_reduceChildren(e,t){let i=e;return this._forEachChild((r,o)=>{i=t(i,r,o)}),i}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var ni=new Z("",{providedIn:"root",factory:()=>Ut}),Ut="always";function Rr(n,e){return[...e.path,n]}function On(n,e,t=Ut){jt(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),Ur(n,e),Lr(n,e),jr(n,e),kr(n,e)}function Tn(n,e,t=!0){let i=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(i),e.valueAccessor.registerOnTouched(i)),Xe(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Ke(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function kr(n,e){if(e.valueAccessor.setDisabledState){let t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function jt(n,e){let t=Xn(n);e.validator!==null?n.setValidators(In(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let i=Zn(n);e.asyncValidator!==null?n.setAsyncValidators(In(i,e.asyncValidator)):typeof i=="function"&&n.setAsyncValidators([i]);let r=()=>n.updateValueAndValidity();Ke(e._rawValidators,r),Ke(e._rawAsyncValidators,r)}function Xe(n,e){let t=!1;if(n!==null){if(e.validator!==null){let r=Xn(n);if(Array.isArray(r)&&r.length>0){let o=r.filter(a=>a!==e.validator);o.length!==r.length&&(t=!0,n.setValidators(o))}}if(e.asyncValidator!==null){let r=Zn(n);if(Array.isArray(r)&&r.length>0){let o=r.filter(a=>a!==e.asyncValidator);o.length!==r.length&&(t=!0,n.setAsyncValidators(o))}}}let i=()=>{};return Ke(e._rawValidators,i),Ke(e._rawAsyncValidators,i),t}function Ur(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&ii(n,e)})}function jr(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&ii(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function ii(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function Lr(n,e){let t=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function Gr(n,e){n==null,jt(n,e)}function Wr(n,e){return Xe(n,e)}function Hr(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function Br(n){return Object.getPrototypeOf(n.constructor)===yr}function $r(n,e){n._syncPendingControls(),e.forEach(t=>{let i=t.control;i.updateOn==="submit"&&i._pendingChange&&(t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function Yr(n,e){if(!e)return null;Array.isArray(e);let t,i,r;return e.forEach(o=>{o.constructor===Ze?t=o:Br(o)?i=o:r=o}),r||i||t||null}function qr(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function Pn(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function Rn(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var Lt=class extends qe{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,i){super(ei(t),ti(i,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Je(t)&&(t.nonNullable||t.initialValueIsDefault)&&(Rn(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Pn(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Pn(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){Rn(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var zr=n=>n instanceof Lt;var ri=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275dir=j({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})();var oi=new Z("");var Kr={provide:_e,useExisting:ve(()=>Gt)},Gt=(()=>{class n extends _e{callSetDisabledState;get submitted(){return B(this._submittedReactive)}set submitted(t){this._submittedReactive.set(t)}_submitted=X(()=>this._submittedReactive());_submittedReactive=T(!1);_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];form=null;ngSubmit=new I;constructor(t,i,r){super(),this.callSetDisabledState=r,this._setValidators(t),this._setAsyncValidators(i)}ngOnChanges(t){t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Xe(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){let i=this.form.get(t.path);return On(i,t,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),i}getControl(t){return this.form.get(t.path)}removeControl(t){Tn(t.control||null,t,!1),qr(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,i){this.form.get(t.path).setValue(i)}onSubmit(t){return this._submittedReactive.set(!0),$r(this.form,this.directives),this.ngSubmit.emit(t),this.form._events.next(new Ot(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0,i={}){this.form.reset(t,i),this._submittedReactive.set(!1),i?.emitEvent!==!1&&this.form._events.next(new Tt(this.form))}_updateDomValue(){this.directives.forEach(t=>{let i=t.control,r=this.form.get(t.path);i!==r&&(Tn(i||null,t),zr(r)&&(On(r,t,this.callSetDisabledState),t.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){let i=this.form.get(t.path);Gr(i,t),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){let i=this.form.get(t.path);i&&Wr(i,t)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){jt(this.form,this),this._oldForm&&Xe(this._oldForm,this)}static \u0275fac=function(i){return new(i||n)(p(kt,10),p(jn,10),p(ni,8))};static \u0275dir=j({type:n,selectors:[["","formGroup",""]],hostBindings:function(i,r){i&1&&M("submit",function(a){return r.onSubmit(a)})("reset",function(){return r.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[oe([Kr]),Q,Ne]})}return n})();var Xr={provide:Ae,useExisting:ve(()=>Wt)},Wt=(()=>{class n extends Ae{_ngModelWarningConfig;_added=!1;viewModel;control;name=null;set isDisabled(t){}model;update=new I;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(t,i,r,o,a){super(),this._ngModelWarningConfig=a,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=Yr(this,o)}ngOnChanges(t){this._added||this._setUpControl(),Hr(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return Rr(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_setUpControl(){this.control=this.formDirective.addControl(this),this._added=!0}static \u0275fac=function(i){return new(i||n)(p(_e,13),p(kt,10),p(jn,10),p(Un,10),p(oi,8))};static \u0275dir=j({type:n,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},standalone:!1,features:[oe([Xr]),Q,Ne]})}return n})();function Zr(n){return typeof n=="number"?n:parseInt(n,10)}var Jr=(()=>{class n{_validator=We;_onChange;_enabled;ngOnChanges(t){if(this.inputName in t){let i=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):We,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static \u0275fac=function(i){return new(i||n)};static \u0275dir=j({type:n,features:[Ne]})}return n})();var Qr={provide:kt,useExisting:ve(()=>Ht),multi:!0},Ht=(()=>{class n extends Jr{maxlength;inputName="maxlength";normalizeInput=t=>Zr(t);createValidator=t=>Ln(t);static \u0275fac=(()=>{let t;return function(r){return(t||(t=ut(n)))(r||n)}})();static \u0275dir=j({type:n,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(i,r){i&2&&v("maxlength",r._enabled?r.maxlength:null)},inputs:{maxlength:"maxlength"},standalone:!1,features:[oe([Qr]),Q]})}return n})();var eo=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=mt({type:n});static \u0275inj=at({})}return n})();var si=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:oi,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:ni,useValue:t.callSetDisabledState??Ut}]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=mt({type:n});static \u0275inj=at({imports:[eo]})}return n})();var ye=class n{el=A(Ce);ngAfterViewInit(){setTimeout(()=>this.el.nativeElement.focus())}static \u0275fac=function(t){return new(t||n)};static \u0275dir=j({type:n,selectors:[["","appAutoFocus",""]]})};function ai(){return"userAgentData"in navigator?navigator.userAgentData.platform?.toLowerCase().includes("mac"):navigator.userAgent.toLowerCase().includes("mac")}var no=n=>({"comment-edit__update":n});function io(n,e){if(n&1&&(h(0,"p"),C(1),y()),n&2){m(2);let t=S(0);u(),ae(t.content)}}function ro(n,e){if(n&1&&(h(0,"div",0),g(1,io,2,1,"p"),y()),n&2){m();let t=S(0);u(),_(t?1:-1)}}function oo(n,e){if(n&1&&z(0,"img",7),n&2){let t=m(3).state.currentUser();F("src",t==null||t.image==null?null:t.image.png,Oe)("alt","avatar of "+(t==null?null:t.username))}}function so(n,e){if(n&1&&(h(0,"div",4),g(1,oo,1,2,"img",7),y()),n&2){let t=m(2);u(),_(t.state.currentUser()?1:-1)}}function ao(n,e){n&1&&C(0," Send ")}function lo(n,e){n&1&&C(0," Reply ")}function co(n,e){n&1&&C(0," Update ")}function uo(n,e){if(n&1){let t=H();h(0,"div",1)(1,"form",2)(2,"textarea",3),M("keydown",function(r){w(t);let o=m();return V(o.contentKeyDown(r))}),y()(),g(3,so,2,1,"div",4),h(4,"div",5)(5,"button",6),M("click",function(){w(t);let r=m();return V(r.update())}),g(6,ao,1,0),g(7,lo,1,0),g(8,co,1,0),y()()()}if(n&2){let t=m(),i=S(1),r=S(2),o=S(3);F("ngClass",en(8,no,o)),u(),F("formGroup",t.form),u(),v("aria-label",r),u(),_(o?-1:3),u(2),F("disabled",!t.form.valid),u(),_(i===t.CommentStatus.SEND?6:-1),u(),_(i===t.CommentStatus.REPLY?7:-1),u(),_(i===t.CommentStatus.UPDATE?8:-1)}}var Qe=class n{constructor(e){this.state=e}CommentStatus=d;id=0;content=new I;cancel=new I;form=new ze({content:new Lt("",[Ee.required,Ee.minLength(1)])});ngOnInit(){let e=this.state.comment()?.content??"";this.form.patchValue({content:e})}update(){let e=this.form.get("content").value;if(this.state.status()===d.SEND&&this.form.patchValue({content:""}),this.state.status()===d.REPLY||this.state.status()===d.UPDATE){let t=this.state.comment();t&&(t.content=e??"",this.state.comment.set(t))}this.content.emit(e)}cancelEdit(){this.state.status()===d.SEND&&this.form.patchValue({content:""}),(this.state.status()===d.REPLY||this.state.status()===d.UPDATE)&&this.cancel.emit()}contentKeyDown(e){(ai()?e.metaKey:e.ctrlKey)&&e.key==="Enter"&&(e.preventDefault(),this.form.valid&&this.update()),e.key==="Escape"&&this.cancelEdit()}static \u0275fac=function(t){return new(t||n)(p(k))};static \u0275cmp=P({type:n,selectors:[["app-comment-content"]],outputs:{content:"content",cancel:"cancel"},decls:6,vars:6,consts:[[1,"comment-content","text-preset-2","txt-grey-500"],[1,"comment-edit","txt-grey-500]",3,"ngClass"],[1,"comment-edit__form","form",3,"formGroup"],["appAutoFocus","","maxlength","500","formControlName","content","placeholder","Add a comment...",1,"form-textarea","text-preset-2","txt-grey-800","h-[96px]","w-full","rounded-[8px]","border","border-gray-200","p-2","hover:border-gray-500","active:border-gray-500",3,"keydown"],[1,"comment-edit__avatar","flex","h-[48px]","items-center"],[1,"comment-edit__actions","flex","h-[48px]","flex-row-reverse","items-center"],["type","button",1,"comment-edit__btn","txt-white","text-preset-2-medium","bg-starstruck","flex-center","inline-block","h-[48px]","w-[108px]","rounded-[8px]","hover:opacity-60","active:opacity-90","disabled:opacity-30",3,"click","disabled"],[1,"h-[32px]","w-[32px]","md:h-[40px]","md:w-[40px]",3,"src","alt"]],template:function(t,i){if(t&1&&(le(0)(1)(2)(3),g(4,ro,2,1,"div",0),g(5,uo,9,10,"div",1)),t&2){G(i.state.comment()),u();let r=G(i.state.status()),o=r===i.CommentStatus.INITIAL||r===i.CommentStatus.INFORMATION;u(),G(r===i.CommentStatus.UPDATE?"Update comment":r===i.CommentStatus.REPLY?"Reply a comment":r===i.CommentStatus.SEND?"Add a comment":"");let a=r===i.CommentStatus.UPDATE||r===i.CommentStatus.REPLY||r===i.CommentStatus.SEND;u(),G(r===i.CommentStatus.UPDATE),u(),_(o?4:-1),u(),_(a?5:-1)}},dependencies:[si,ri,Ze,Jn,Qn,Ht,Gt,Wt,ce,ye],styles:[`.comment-edit{display:grid;grid-template-areas:"form form" "avatar action";gap:16px}.comment-edit__update{grid-template-columns:1fr;grid-template-areas:"form" "action"}.comment-edit__form{grid-area:form}.comment-edit__avatar{grid-area:avatar}.comment-edit__actions{grid-area:action}@media screen and (min-width: 48em){.comment-edit{grid-template-columns:auto 1fr auto;grid-template-areas:"avatar form action"}.comment-edit__update{grid-template-columns:1fr;grid-template-areas:"form" "action"}}
`],encapsulation:2,changeDetection:0})};var li=(n,e)=>({"pointer-events-none":n,"txt-starstruck":e}),et=class n{constructor(e){this.state=e}wasUpvoted;updateVote=new I;hostClasses="comment-upvote rounded-[10px] p-[8px] bg-grey-50";set classes(e){this.hostClasses=this.hostClasses+(e?` ${e}`:"")}upvote(e){this.wasUpvoted===e?this.updateVote.emit(0):this.updateVote.emit(e)}static \u0275fac=function(t){return new(t||n)(p(k))};static \u0275cmp=P({type:n,selectors:[["app-comment-upvote"]],inputs:{wasUpvoted:"wasUpvoted",classes:"classes"},outputs:{updateVote:"updateVote"},decls:9,vars:18,consts:[["role","group","aria-label","Upvote buttons",1,"comment-upvote",3,"ngClass"],[1,"text-preset-2","txt-purple-200","hover:txt-purple-600","active:txt-purple-600","focus-visible:txt-purple-600","bg-grey-50","flex-center","h-[24px]","w-[20px]",3,"click","disabled","ngClass","aria-label"],["width","11px","height","11px","aria-hidden","true"],["href","assets/images/icon-plus.svg#plus"],["role","status","aria-live","polite",1,"text-preset-2","txt-purple-600","bg-grey-50","flex-center","h-[24px]","w-[30px]",3,"aria-label"],["width","11px","height","3px","aria-hidden","true"],["href","assets/images/icon-minus.svg#minus"]],template:function(t,i){if(t&1){let r=H();h(0,"div",0)(1,"button",1),M("click",function(){return w(r),V(i.upvote(1))}),re(),h(2,"svg",2),z(3,"use",3),y()(),Zt(),h(4,"span",4),C(5),y(),h(6,"button",1),M("click",function(){return w(r),V(i.upvote(-1))}),re(),h(7,"svg",5),z(8,"use",6),y()()()}if(t&2){let r,o,a,s,c=(r=i.state.comment())==null?null:r.id,l=(o=i.state.comment())==null||o.user==null?null:o.user.username,D=(a=i.state.currentUser())==null?null:a.username,N=l===D;F("ngClass",i.hostClasses),u(),F("disabled",N)("ngClass",yt(12,li,N,i.wasUpvoted===1)),Te("aria-label","Upvote comment for "+l),v("data-cy","Upvote plus id:"+c),u(3),Te("aria-label","Score of "+l),v("data-cy","Score id:"+c),u(),ae(((s=i.state.comment())==null?null:s.score)??0),u(),F("disabled",N)("ngClass",yt(15,li,N,i.wasUpvoted===-1)),Te("aria-label","Downvote comment for "+l),v("data-cy","Downvote plus id:"+c)}},dependencies:[ce],encapsulation:2,changeDetection:0})};var tt=class n{close=new I;onClose(e){this.close.emit(e)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=P({type:n,selectors:[["app-modal-delete-comment"]],outputs:{close:"close"},decls:11,vars:0,consts:[[1,"modal-backdrop",3,"click"],[1,"modal","flex","w-full","max-w-[343px]","min-w-0","flex-col","gap-[20px]","rounded-[8px]","p-[25px]","md:max-w-[400px]"],[1,"modal__title","text-preset-1","txt-grey-800"],[1,"modal__body","text-preset-2","txt-grey-500"],[1,"modal__actions","flex","flex-row","items-center","justify-center","gap-[16px]"],["type","button","appAutoFocus","",1,"text-preset-2-medium","txt-white","flex-center","bg-grey-500","h-[48px]","rounded-[8px]","px-4","uppercase",3,"click"],["type","button",1,"text-preset-2-medium","txt-white","flex-center","h-[48px]","rounded-[8px]","bg-pink-400","px-4","uppercase",3,"click"]],template:function(t,i){t&1&&(h(0,"div",0),M("click",function(){return i.onClose("abort")}),y(),h(1,"div",1)(2,"h3",2),C(3,"Delete comment"),y(),h(4,"p",3),C(5," Are you sure you want to delete this comment? This will remove the comment and can\u2019t be undone. "),y(),h(6,"div",4)(7,"button",5),M("click",function(){return i.onClose("no")}),C(8," No, cancel "),y(),h(9,"button",6),M("click",function(){return i.onClose("yes")}),C(10," Yes, delete "),y()()())},dependencies:[ye],encapsulation:2,changeDetection:0})};var nt=class n{appRef=A(ft);injector=A(Xt);modalRef=null;open(){if(this.modalRef)return Promise.reject("Modal already open");this.modalRef=on(tt,{environmentInjector:this.injector});let e=new Promise(t=>{this.modalRef.instance.close.subscribe(i=>{t(i),this.close()})});return this.appRef.attachView(this.modalRef.hostView),document.body.appendChild(this.modalRef.location.nativeElement),e}close(){this.modalRef&&(this.appRef.detachView(this.modalRef.hostView),this.modalRef.destroy(),this.modalRef=null)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"})};function mo(n,e){if(n&1){let t=H();L(0,"button",4),Re("click",function(){w(t);let r=m(2);return V(r.deleteAction())}),re(),L(1,"svg",5),se(2,"use",6),R(),C(3," Delete "),R()}if(n&2){m(2);let t=S(0);v("data-cy","Delete comment id:"+t)}}function fo(n,e){if(n&1){let t=H();L(0,"button",7),Re("click",function(){w(t);let r=m(2);return V(r.replyAction())}),re(),L(1,"svg",8),se(2,"use",9),R(),C(3," Reply "),R()}if(n&2){m(2);let t=S(0);v("data-cy","Reply comment id:"+t)}}function po(n,e){if(n&1){let t=H();L(0,"button",10),Re("click",function(){w(t);let r=m(2);return V(r.editAction())}),re(),L(1,"svg",11),se(2,"use",12),R(),C(3," Edit "),R()}if(n&2){let t=m(2),i=S(0),r=S(1);Pe("disabled",r===t.CommentStatus.UPDATE),v("data-cy","Edit comment id:"+i)}}function ho(n,e){if(n&1&&(g(0,mo,4,1,"button",1),g(1,fo,4,1,"button",2),g(2,po,4,2,"button",3)),n&2){m();let t=S(2);_(t?0:-1),u(),_(t?-1:1),u(),_(t?2:-1)}}var it=class n{constructor(e){this.state=e}delete=new I;reply=new I;edit=new I;modalDelete=A(nt);CommentStatus=d;async deleteAction(){await this.modalDelete.open()==="yes"&&this.delete.emit()}replyAction(){this.reply.emit()}editAction(){this.edit.emit()}static \u0275fac=function(t){return new(t||n)(p(k))};static \u0275cmp=P({type:n,selectors:[["app-comment-shortcut"]],outputs:{delete:"delete",reply:"reply",edit:"edit"},decls:5,vars:5,consts:[["role","group","aria-label","Comment actions",1,"flex","flex-row","items-center","justify-center","gap-2"],["aria-label","Delete comment","title","Delete comment",1,"text-preset-2-medium","txt-pink-300","disabled:txt-pink-200","hover:txt-pink-400","active:txt-pink-400","focus-visible:txt-pink-400","justifify-center","align-center","flex","items-center","gap-1.5"],["aria-label","Reply to comment","title","Reply to comment",1,"text-preset-2-medium","disabled:txt-purple-200","txt-purple-400","hover:txt-purple-600","active:txt-purple-600","focus-visible:txt-purple-600","justifify-center","align-center","flex","items-center","gap-1.5"],["aria-label","Edit comment","title","Edit comment",1,"text-preset-2-medium","disabled:txt-purple-200","txt-purple-400","hover:txt-purple-600","active:txt-purple-600","focus-visible:txt-purple-600","justifify-center","align-center","flex","items-center","gap-1.5","disabled:pointer-events-none",3,"disabled"],["aria-label","Delete comment","title","Delete comment",1,"text-preset-2-medium","txt-pink-300","disabled:txt-pink-200","hover:txt-pink-400","active:txt-pink-400","focus-visible:txt-pink-400","justifify-center","align-center","flex","items-center","gap-1.5",3,"click"],["width","11px","height","14px","aria-hidden","true"],["href","assets/images/icon-delete.svg#delete"],["aria-label","Reply to comment","title","Reply to comment",1,"text-preset-2-medium","disabled:txt-purple-200","txt-purple-400","hover:txt-purple-600","active:txt-purple-600","focus-visible:txt-purple-600","justifify-center","align-center","flex","items-center","gap-1.5",3,"click"],["width","14px","height","13px","aria-hidden","true"],["href","assets/images/icon-reply.svg#reply"],["aria-label","Edit comment","title","Edit comment",1,"text-preset-2-medium","disabled:txt-purple-200","txt-purple-400","hover:txt-purple-600","active:txt-purple-600","focus-visible:txt-purple-600","justifify-center","align-center","flex","items-center","gap-1.5","disabled:pointer-events-none",3,"click","disabled"],["width","14px","height","14px","aria-hidden","true"],["href","assets/images/icon-edit.svg#edit"]],template:function(t,i){if(t&1&&(le(0)(1)(2),L(3,"div",0),g(4,ho,3,3),R()),t&2){let r;G((r=i.state.comment())==null?null:r.id),u();let o=G(i.state.status());u(),G(i.state.isYourOwnComment()),u(),v("data-cy","status: "+o),u(),_(o!==i.CommentStatus.SEND?4:-1)}},encapsulation:2,changeDetection:0})};var ci=Symbol("DEEP_SIGNAL");function ui(n){return new Proxy(n,{has(e,t){return!!this.get(e,t,void 0)},get(e,t){let i=B(e);return!_o(i)||!(t in i)?(ct(e[t])&&e[t][ci]&&delete e[t],e[t]):(ct(e[t])||(Object.defineProperty(e,t,{value:X(()=>e()[t]),configurable:!0}),e[t][ci]=!0),ui(e[t]))}})}var go=[WeakSet,WeakMap,Promise,Date,Error,RegExp,ArrayBuffer,DataView,Function];function _o(n){if(n===null||typeof n!="object"||yo(n))return!1;let e=Object.getPrototypeOf(n);if(e===Object.prototype)return!0;for(;e&&e!==Object.prototype;){if(go.includes(e.constructor))return!1;e=Object.getPrototypeOf(e)}return e===Object.prototype}function yo(n){return typeof n?.[Symbol.iterator]=="function"}var vo=new WeakMap,K=Symbol("STATE_SOURCE");function ne(n,...e){let t=B(()=>di(n)),i=e.reduce((a,s)=>f(f({},a),typeof s=="function"?s(a):s),t),r=n[K],o=Reflect.ownKeys(n[K]);for(let a of Reflect.ownKeys(i))if(o.includes(a)){let s=a;t[s]!==i[s]&&r[s].set(i[s])}bo(n)}function di(n){let e=n[K];return Reflect.ownKeys(n[K]).reduce((t,i)=>{let r=e[i]();return O(f({},t),{[i]:r})},{})}function Co(n){return vo.get(n[K])||[]}function bo(n){let e=Co(n);for(let t of e){let i=B(()=>di(n));t(i)}}function mi(...n){let e=[...n],t=typeof e[0]=="function"?{}:e.shift(),i=e;return(()=>{class o{constructor(){let s=i.reduce((q,st)=>st(q),Do()),{stateSignals:c,props:l,methods:D,hooks:N}=s,x=f(f(f({},c),l),D);this[K]=s[K];for(let q of Reflect.ownKeys(x))this[q]=x[q];let{onInit:Y,onDestroy:U}=N;Y&&Y(),U&&A(lt).onDestroy(U)}static \u0275fac=function(c){return new(c||o)};static \u0275prov=ie({token:o,factory:o.\u0275fac,providedIn:t.providedIn||null})}return o})()}function Do(){return{[K]:{},stateSignals:{},props:{},methods:{},hooks:{}}}function fi(n){return e=>{let t=n(f(f(f({[K]:e[K]},e.stateSignals),e.props),e.methods));return Reflect.ownKeys(t),O(f({},e),{methods:f(f({},e.methods),t)})}}function pi(n){return e=>{let t=typeof n=="function"?n():n,i=Reflect.ownKeys(t);let r=e[K],o={};for(let a of i)r[a]=T(t[a]),o[a]=ui(r[a]);return O(f({},e),{stateSignals:f(f({},e.stateSignals),o)})}}var Ie={upvote:{},lastId:100,currentUser:{image:{png:"/assets/images/avatars/image-juliusomo.png",webp:"/assets/images/avatars/image-juliusomo.webp"},username:"juliusomo"},comments:[{id:1,content:"Impressive! Though it seems the drag feature could be improved. But overall it looks incredible. You've nailed the design and the responsiveness at various breakpoints works really well.",createdAt:"2025-08-06T00:00:00.000Z",score:12,user:{image:{png:"/assets/images/avatars/image-amyrobson.png",webp:"/assets/images/avatars/image-amyrobson.webp"},username:"amyrobson"},replies:[]},{id:2,content:"Woah, your project looks awesome! How long have you been coding for? I'm still new, but think I want to dive into React as well soon. Perhaps you can give me an insight on where I can learn React? Thanks!",createdAt:"2025-08-22T00:00:00.000Z",score:5,user:{image:{png:"/assets/images/avatars/image-maxblagun.png",webp:"/assets/images/avatars/image-maxblagun.webp"},username:"maxblagun"},replies:[{id:3,content:"If you're still new, I'd recommend focusing on the fundamentals of HTML, CSS, and JS before considering React. It's very tempting to jump ahead but lay a solid foundation first.",createdAt:"2025-08-29T00:00:00.000Z",score:4,replyingTo:"maxblagun",user:{image:{png:"/assets/images/avatars/image-ramsesmiron.png",webp:"/assets/images/avatars/image-ramsesmiron.webp"},username:"ramsesmiron"}},{id:4,content:"I couldn't agree more with this. Everything moves so fast and it always seems like everyone knows the newest library/framework. But the fundamentals are what stay constant.",createdAt:"2025-09-03T00:00:00.000Z",score:2,replyingTo:"ramsesmiron",user:{image:{png:"/assets/images/avatars/image-juliusomo.png",webp:"/assets/images/avatars/image-juliusomo.webp"},username:"juliusomo"}}]}]};var Bt=()=>[],$t=()=>({username:"",image:{png:"",webp:""}}),W=async(n,e)=>{localStorage.setItem(e,JSON.stringify(n))},hi=new Z("UserData",{factory:()=>{let n=localStorage.getItem("upvote"),e=localStorage.getItem("lastId"),t=localStorage.getItem("comments"),i=localStorage.getItem("currentUser"),r=Bt(),o=$t(),a=100,s={};return n?s=JSON.parse(n):W({},"upvote"),e?a=parseInt(e,10):(W(100,"lastId"),a=100),t?r=JSON.parse(t):(W(Ie.comments,"comments"),r=Ie.comments),i?o=JSON.parse(i):(W(Ie.currentUser,"currentUser"),o=Ie.currentUser),{upvote:s,lastId:a,comments:r,currentUser:o}}});var rt=mi({providedIn:"root"},pi(()=>A(hi)),fi(n=>({clearCurrentUser(){let e=$t();W(e,"currentUser"),ne(n,{currentUser:e})},clearComments(){let e=Bt();W(e,"comments"),ne(n,{comments:e})},getUpvote:e=>n.upvote()[e]??void 0,setUpvote({idx1:e,idx2:t,id:i,score:r,formerVote:o,vote:a}){let s=structuredClone(n.upvote()),c=structuredClone(n.comments());r+=a-o,c[e]&&(t===-1&&c[e].id===i?c[e].score=r:c[e].replies?.[t]?.id===i&&(c[e].replies[t].score=r)),s[i]=a,W(c,"comments"),W(s,"upvote"),ne(n,{upvote:s,comments:c})},loggedInUser:X(()=>n.currentUser()),postComments:X(()=>n.comments()),deleteComment({idx1:e,idx2:t,id:i}){let r=structuredClone(n.comments());r[e]&&(t===-1&&r[e].id===i?r.splice(e,1):r[e].replies?.[t]?.id===i&&r[e].replies.splice(t,1)),W(r,"comments"),ne(n,{comments:r})},updateStatus({status:e,idx1:t,idx2:i,id:r}){let o=structuredClone(n.comments());o[t]&&(i===-1&&o[t].id===r?o[t].status=e:o[t].replies?.[i]?.id===r&&(o[t].replies[i].status=e)),W(o,"comments"),ne(n,{comments:o})},updateComment({status:e,idx1:t,idx2:i,id:r,content:o,user:a}){let s=structuredClone(n.comments()),c=n.lastId(),l;e===d.SEND&&(c++,l={id:c,content:o,createdAt:Mt(new Date),score:0,replies:[],replyingTo:"",user:a,status:d.INFORMATION},s.push(l)),s[t]&&(e===d.REPLY||e===d.UPDATE)&&(i===-1&&s[t].id===r?(s[t].content=o,s[t].status=d.INFORMATION):s[t].replies?.[i]?.id===r&&(s[t].replies[i].content=o,s[t].replies[i].status=d.INFORMATION)),W(s,"comments"),ne(n,{lastId:c,comments:s})},replyComment({idx1:e,idx2:t,id:i,user:r}){let o=structuredClone(n.comments()),a=n.lastId(),s;for(let c=o.length-1;c>=0;c--)if(o[c].status===d.REPLY)o.splice(c,1);else if(o[c].replies?.length)for(let l=o[c].replies.length-1;l>=0;l--)o[c].replies[l].status===d.REPLY&&o[c].replies.splice(l,1);if(s={id:++a,content:"",createdAt:Mt(new Date),score:0,replies:[],replyingTo:"",user:r},o[e]){if(t===-1&&o[e].id===i){let c=o[e].replies??[],l=o[e].user.username;s.replyingTo=l,s.content=`@${l} `,s.content=`@${l} `,s.status=d.REPLY,c.push(s),o[e].replies=c}else if(o[e].replies?.[t]?.id===i){let c=o[e].replies,l=o[e].replies[t].user.username;s.replyingTo=l,s.content=`@${l} `,s.status=d.REPLY,c.splice(t+1,0,s),o[e].replies=c}}W(o,"comments"),ne(n,{lastId:a,comments:o})}})));var xo=(n,e,t,i)=>({"comment-card__information":n,"comment-card__reply":e,"comment-card__update":t,"comment-card__send":i});function wo(n,e){n&1&&z(0,"app-comment-header",1)}function Vo(n,e){if(n&1){let t=H();h(0,"app-comment-upvote",5),M("updateVote",function(r){w(t);let o=m();return V(o.upvote(r))}),y()}if(n&2){let t=m();F("wasUpvoted",t.store.getUpvote(t.id))}}function Mo(n,e){if(n&1){let t=H();h(0,"app-comment-shortcut",6),M("delete",function(){w(t);let r=m();return V(r.deleteAction())})("reply",function(){w(t);let r=m();return V(r.replyAction())})("edit",function(){w(t);let r=m();return V(r.editAction())}),y()}}var ot=class n{constructor(e){this.state=e}CommentStatus=d;store=A(rt);idx1;idx2;comment;currentUser;initialStatus;isReply=!1;replyingTo="";id=0;ngOnInit(){let e=this.initialStatus||this.comment?.status||d.INFORMATION;this.state.status.set(e),this.state.replyingTo.set(this.replyingTo??""),this.comment&&(this.id=this.comment.id,this.state.comment.set(this.comment)),this.currentUser&&this.state.currentUser.set(this.currentUser),this.comment?.user?.username===this.currentUser?.username&&this.state.isYourOwnComment.set(!0)}updateContent(e){let t=this.state.status(),i={idx1:this.idx1,idx2:this.idx2??-1,id:this.id,content:e,user:this.state.currentUser(),status:t};console.log(i),this.store.updateComment(i)}deleteAction(){if(this.id&&this.idx1!==-1){let e={idx1:this.idx1,idx2:this.idx2??-1,id:this.id};this.store.deleteComment(e)}}editAction(){if(this.id&&this.idx1!==-1){let e={idx1:this.idx1,idx2:this.idx2??-1,id:this.id,status:d.UPDATE};this.store.updateStatus(e)}}replyAction(){if(this.comment?.id&&this.idx1!==-1){let e={idx1:this.idx1,idx2:this.idx2??-1,id:this.comment.id,user:this.state.currentUser()};this.store.replyComment(e)}}upvote(e){if(this.comment?.id&&this.idx1!==-1){let t={idx1:this.idx1,idx2:this.idx2??-1,id:this.id,score:this.comment?.score??0,formerVote:this.store.getUpvote(this.id)??0,vote:e};this.store.setUpvote(t)}}cancelEdit(){if(this.state.status()===d.REPLY)this.deleteAction();else if(this.id&&this.idx1!==-1){let e={idx1:this.idx1,idx2:this.idx2??-1,id:this.id,status:d.INFORMATION};this.store.updateStatus(e)}}static \u0275fac=function(t){return new(t||n)(p(k))};static \u0275cmp=P({type:n,selectors:[["app-comment-card"]],inputs:{idx1:"idx1",idx2:"idx2",comment:"comment",currentUser:"currentUser",initialStatus:"initialStatus",isReply:"isReply",replyingTo:"replyingTo"},features:[oe([k])],decls:5,vars:11,consts:[["role","region",1,"comment-card","ml-auto","self-stretch","bg-white",3,"ngClass"],[1,"comment-card-header"],[1,"comment-card-content",3,"content","cancel"],["classes","flex flex-row items-center w-fit md:flex-col md:gap-2",1,"comment-card-upvote",3,"wasUpvoted"],[1,"comment-card-shortcut","flex","flex-row","items-center","gap-2"],["classes","flex flex-row items-center w-fit md:flex-col md:gap-2",1,"comment-card-upvote",3,"updateVote","wasUpvoted"],[1,"comment-card-shortcut","flex","flex-row","items-center","gap-2",3,"delete","reply","edit"]],template:function(t,i){if(t&1){let r=H();h(0,"article",0),g(1,wo,1,0,"app-comment-header",1),h(2,"app-comment-content",2),M("content",function(a){return w(r),V(i.updateContent(a))})("cancel",function(){return w(r),V(i.cancelEdit())}),y(),g(3,Vo,1,1,"app-comment-upvote",3),g(4,Mo,1,0,"app-comment-shortcut",4),y()}if(t&2){let r,o=i.state.status(),a=o===i.CommentStatus.INITIAL||o===i.CommentStatus.INFORMATION,s=o===i.CommentStatus.SEND||o===i.CommentStatus.REPLY;F("ngClass",tn(6,xo,a,i.state.status()===i.CommentStatus.REPLY,i.state.status()===i.CommentStatus.UPDATE,i.state.status()===i.CommentStatus.SEND)),v("aria-label","Comment by "+((r=i.state.comment())==null||r.user==null?null:r.user.username))("aria-labelledby","comment-heading"+i.state.uniqueId()),u(),_(s?-1:1),u(2),_(s?-1:3),u(),_(s?-1:4)}},dependencies:[ce,Le,Qe,et,it],styles:['.comment-card[_ngcontent-%COMP%]{padding:16px;border-radius:8px;width:100%;min-width:343px;box-shadow:0 2px 2px #0000001a}.comment-card__reply[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;grid-template-rows:auto;grid-template-areas:"content"}.comment-card__information[_ngcontent-%COMP%], .comment-card__update[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr 1fr;grid-template-rows:auto 1fr auto;grid-template-areas:"header header header" "content content content" "upvote shortcut shortcut";gap:16px}.comment-card-header[_ngcontent-%COMP%]{grid-area:header}.comment-card-content[_ngcontent-%COMP%]{grid-area:content}.comment-card-upvote[_ngcontent-%COMP%]{grid-area:upvote}.comment-card-shortcut[_ngcontent-%COMP%]{grid-area:shortcut;justify-self:end}@media screen and (min-width: 48em){.comment-card[_ngcontent-%COMP%]{max-width:684px;margin-left:auto}.comment-card__information[_ngcontent-%COMP%]{grid-template-columns:auto 1fr 1fr;grid-template-rows:auto 1fr;grid-template-areas:"upvote header header shortcut" "upvote content content content";gap:24px}.comment-card__update[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto 1fr 1fr;grid-template-areas:"upvote header header shortcut" "upvote content content content";gap:16px}}'],changeDetection:0})};var _i=(n,e)=>`${e.id}-${e.status??""}-${e.score}`;function So(n,e){if(n&1&&z(0,"app-comment-card",5),n&2){let t=e.$implicit,i=e.$index,r=m(2),o=r.$implicit,a=r.$index,s=m();F("idx1",a)("idx2",i)("comment",t)("isReply",!0)("currentUser",s.store.currentUser()),v("data-cy",`Reply to comment id:${o.id}`)}}function Eo(n,e){if(n&1&&(h(0,"div",3)(1,"div",4),pt(2,So,1,6,"app-comment-card",5,_i),y()()),n&2){let t=m().$implicit;u(2),ht(t.replies)}}function Ao(n,e){if(n&1&&(z(0,"app-comment-card",2),g(1,Eo,4,0,"div",3)),n&2){let t=e.$implicit,i=e.$index,r=m();F("idx1",i)("comment",t)("currentUser",r.store.currentUser()),v("data-cy",`Comment id:${t.id}`),u(),_(t.replies&&t.replies.length>0?1:-1)}}var gi=class n{CommentStatus=d;store=A(rt);static \u0275fac=function(t){return new(t||n)};static \u0275cmp=P({type:n,selectors:[["app-comments"]],decls:4,vars:2,consts:[["aria-label","List of comments",1,"comments","align-items","flex","flex-col","items-center","justify-center","gap-[16px]","py-2","md:gap-[24px]"],["data-cy","Send new comment",1,"self-stretch","px-[17px]",3,"initialStatus","currentUser"],[1,"self-stretch","px-[17px]",3,"idx1","comment","currentUser"],["aria-label","List of replies",1,"w-full"],[1,"comments-replies","align-items","flex","flex-col","items-center","justify-center","gap-[16px]","self-stretch","md:gap-[24px]"],[1,"self-stretch","pl-[17px]",3,"idx1","idx2","comment","isReply","currentUser"]],template:function(t,i){t&1&&(h(0,"section",0),pt(1,Ao,2,5,null,null,_i),z(3,"app-comment-card",1),y()),t&2&&(u(),ht(i.store.comments()),u(2),F("initialStatus",i.CommentStatus.SEND)("currentUser",i.store.currentUser()))},dependencies:[ot],styles:[".comments[_ngcontent-%COMP%]{max-width:684px;margin-inline:auto}.comments-replies[_ngcontent-%COMP%]{margin-left:auto;box-shadow:-2px 0 2px -2px #0000004d,2px 0 2px -2px #0000004d;margin-right:17px}@media screen and (min-width: 48em){.comments-replies[_ngcontent-%COMP%]{width:calc(100% - 50px)}}"],changeDetection:0})};export{gi as Comments};
